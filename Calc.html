<!DOCTYPE html><html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Liquid Glass Calculator</title><link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;600&display=swap" rel="stylesheet"><style>
  * { box-sizing: border-box; }

  body {
    margin: 0;
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    background: radial-gradient(circle at 20% 20%, #1a1a2e, #0a0a12 60%, #050508);
    font-family: "Space Grotesk", system-ui, sans-serif;
    color: #eee;
  }

  .calculator {
    width: 320px;
    padding: 20px;
    border-radius: 24px;
    background: rgba(255,255,255,0.08);
    backdrop-filter: blur(18px) saturate(160%);
    -webkit-backdrop-filter: blur(18px) saturate(160%);
    border: 1px solid rgba(255,255,255,0.18);
    box-shadow:
      0 20px 40px rgba(0,0,0,0.6),
      inset 0 0 0 1px rgba(255,255,255,0.06);
    position: relative;
    overflow: hidden;
  }

  .calculator::before {
    content: "";
    position: absolute;
    inset: 0;
    background: linear-gradient(120deg, transparent, rgba(180,120,255,0.15), transparent);
    opacity: 0.6;
    pointer-events: none;
  }

  .display-wrap {
    position: relative;
    border-radius: 16px;
    margin-bottom: 16px;
    padding: 12px 16px 14px;
    background: rgba(0,0,0,0.45);
    border: 1px solid rgba(180,120,255,0.35);
    box-shadow:
      inset 0 4px 12px rgba(0,0,0,0.8),
      0 0 18px rgba(140,80,255,0.25);
    display: flex;
    flex-direction: column;
    justify-content: center;
    min-height: 100px;
  }

  .paste-btn {
    position: absolute;
    top: 8px;
    left: 10px;
    width: 30px;
    height: 30px;
    border-radius: 10px;
    border: 1px solid rgba(180,120,255,0.9);
    background: rgba(120,70,255,0.25);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    backdrop-filter: blur(8px);
    box-shadow: 0 0 14px rgba(150,80,255,0.45);
    transition: transform 0.08s ease, box-shadow 0.15s ease;
    padding: 0;
  }

  .paste-btn svg {
    width: 16px;
    height: 16px;
    fill: #efe7ff;
  }

  .paste-btn:hover { box-shadow: 0 0 20px rgba(170,100,255,0.9); }
  .paste-btn:active { transform: scale(0.95); }

  .preview {
    text-align: right;
    font-size: 14px;
    opacity: 0.9;
    min-height: 18px;
    letter-spacing: 0.5px;
    color: #d8caff;
    cursor: pointer;
    user-select: none;
  }

  .preview.copied::after {
    content: " ✓";
    font-size: 12px;
  }

  .display {
    text-align: right;
    font-size: 30px;
    letter-spacing: 1px;
    overflow: hidden;
    word-break: break-all;
  }

  .buttons {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 12px;
  }
button.calc-btn {
    height: 58px;
    border-radius: 16px;
    border: 1px solid rgba(255,255,255,0.16);
    background: rgba(255,255,255,0.06);
    color: #f1edff;
    font-size: 18px;
    font-family: "Space Grotesk", system-ui, sans-serif;
    cursor: pointer;
    backdrop-filter: blur(8px);
    box-shadow:
      inset 0 1px 0 rgba(255,255,255,0.18),
      0 6px 14px rgba(0,0,0,0.45);
    transition: transform 0.08s ease, box-shadow 0.12s ease, border 0.2s ease, background 0.2s ease;
  }

  button.calc-btn:hover {
    background: rgba(255,255,255,0.10);
    border-color: rgba(255,255,255,0.28);
  }

  button.calc-btn:active {
    transform: translateY(2px) scale(0.98);
    box-shadow: inset 0 3px 8px rgba(0,0,0,0.8);
  }
.accent {
    background: linear-gradient(160deg, rgba(150,90,255,0.75), rgba(90,40,210,0.75));
    border: 1px solid rgba(200,160,255,0.95);
    color: #ffffff;
    box-shadow:
      0 0 22px rgba(150,80,255,0.75),
      0 10px 22px rgba(80,30,160,0.6),
      inset 0 1px 0 rgba(255,255,255,0.45);
  }

  .accent:hover {
    background: linear-gradient(160deg, rgba(170,110,255,0.95), rgba(110,60,230,0.95));
    box-shadow:
      0 0 30px rgba(170,100,255,1),
      0 12px 26px rgba(90,40,180,0.8),
      inset 0 1px 0 rgba(255,255,255,0.55);
  }

  .wide { grid-column: span 2; }
</style></head>
<body><div class="calculator">
  <div class="display-wrap">
    <button class="paste-btn" onclick="pasteFromClipboard()" title="Вставить">
      <svg viewBox="0 0 24 24">
        <rect x="9" y="9" width="11" height="11" rx="2"></rect>
        <rect x="4" y="4" width="11" height="11" rx="2" opacity="0.6"></rect>
      </svg>
    </button><div id="preview" class="preview" onclick="copyPreview()"></div>
<div id="display" class="display">0</div>

  </div>  <div class="buttons">
    <button class="calc-btn accent" onclick="clearAll()">C</button>
    <button class="calc-btn accent" onclick="delOne()">⌫</button>
    <button class="calc-btn accent" onclick="append('%')">%</button>
    <button class="calc-btn accent" onclick="append('/')">÷</button><button class="calc-btn" onclick="append('7')">7</button>
<button class="calc-btn" onclick="append('8')">8</button>
<button class="calc-btn" onclick="append('9')">9</button>
<button class="calc-btn accent" onclick="append('*')">×</button>

<button class="calc-btn" onclick="append('4')">4</button>
<button class="calc-btn" onclick="append('5')">5</button>
<button class="calc-btn" onclick="append('6')">6</button>
<button class="calc-btn accent" onclick="append('-')">−</button>

<button class="calc-btn" onclick="append('1')">1</button>
<button class="calc-btn" onclick="append('2')">2</button>
<button class="calc-btn" onclick="append('3')">3</button>
<button class="calc-btn accent" onclick="append('+')">+</button>

<button class="calc-btn wide" onclick="append('0')">0</button>
<button class="calc-btn" onclick="append('.')">.</button>
<button class="calc-btn accent" onclick="calculate()">=</button>

  </div>
</div><script>
  const display = document.getElementById('display');
  const preview = document.getElementById('preview');

  function normalize(expr) {
    return expr
      .replace(/÷/g, '/')
      .replace(/×/g, '*')
      .replace(/−/g, '-');
  }

  function safeEval(expr) {
    if (!/[0-9)]$/.test(expr)) return null;
    try {
      const v = Function('return ' + normalize(expr))();
      if (Number.isFinite(v)) return v;
    } catch {}
    return null;
  }

  function updatePreview() {
    const val = safeEval(display.textContent);
    preview.classList.remove('copied');
    preview.textContent = val === null ? '' : '≈ ' + val;
  }

  function append(value) {
    if (display.textContent === '0' && value !== '.') {
      display.textContent = value;
    } else {
      display.textContent += value;
    }
    updatePreview();
  }

  function clearAll() {
    display.textContent = '0';
    preview.textContent = '';
    preview.classList.remove('copied');
  }

  function delOne() {
    display.textContent = display.textContent.slice(0, -1) || '0';
    updatePreview();
  }

  function calculate() {
    const result = safeEval(display.textContent);
    display.textContent = result === null ? 'Error' : result;
    preview.textContent = '';
    preview.classList.remove('copied');
  }

  async function pasteFromClipboard() {
    try {
      if (navigator.clipboard && window.isSecureContext) {
        const text = await navigator.clipboard.readText();
        applyPastedText(text);
      } else {
        const text = prompt('Вставьте выражение:');
        applyPastedText(text);
      }
    } catch {
      const text = prompt('Вставьте выражение:');
      applyPastedText(text);
    }
  }

  function applyPastedText(text) {
    if (!text) return;
    const cleaned = text.replace(/[^0-9+\-*/().%]/g, '');
    if (!cleaned) return;
    display.textContent = cleaned;
    updatePreview();
  }

  async function copyPreview() {
    if (!preview.textContent) return;
    const val = preview.textContent.replace('≈ ', '');
    try {
      await navigator.clipboard.writeText(val);
    } catch {
      const ta = document.createElement('textarea');
      ta.value = val;
      document.body.appendChild(ta);
      ta.select();
      document.execCommand('copy');
      ta.remove();
    }
    preview.classList.add('copied');
    setTimeout(() => preview.classList.remove('copied'), 800);
  }

  document.addEventListener('keydown', (e) => {
    if ((/[0-9+\-*/.%]/).test(e.key)) append(e.key);
    if (e.key === 'Enter') calculate();
    if (e.key === 'Backspace') delOne();
    if (e.key === 'Escape') clearAll();
  });
</script></body>
</html>
